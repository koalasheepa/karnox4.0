{%- liquid
  assign swatch_file_extension = 'png'
  assign option_index = forloop.index
-%}

{%- capture size_chart_title -%}
  {{ 'products.general.size_chart' | t }}
  <svg
    aria-hidden="true"
    focusable="false"
    role="presentation"
    class="icon icon-size-chart"
    viewBox="0 0 64 64">
    <defs>
      <style>
        .a {
          fill: none;
          stroke: #000;
          stroke-width: 2px
        }
      </style>
    </defs><path class="a" d="M22.39 33.53c-7.46 0-13.5-3.9-13.5-8.72s6-8.72 13.5-8.72 13.5 3.9 13.5 8.72a12 12 0 0 1-.22 1.73" /><ellipse
      cx="22.39"
      cy="24.81"
      rx="3.28"
      ry="2.12" /><path class="a" d="M8.89 24.81V38.5c0 7.9 6.4 9.41 14.3 9.41h31.92V33.53H22.39M46.78 33.53v7.44M38.65 33.53v7.44M30.52 33.53v7.44M22.39 33.53v7.44" /></svg>
{%- endcapture -%}

{%- liquid
  assign is_size = false
  assign size_trigger = 'products.general.size_trigger' | t | downcase
  assign downcased_option = option.name | downcase

  if downcased_option contains size_trigger
    assign is_size = true
  endif
-%}

<div class="variant-wrapper js" data-type="button">
  <label
    class="variant__label{% if option.name == 'Default' or option.name == 'Title' %} hidden-label{% endif %}{% unless variant_labels %} hidden-label{% endunless %}"
    for="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ forloop.index0 }}"
  >
    <div class="blo_head">
      <!-- <span class="circle-header-count">3</span> -->
      <div>
        {{ option.name }}
      </div>
    </div>
    {%- if connect_to_sizechart and is_size -%}
      <span class="variant__label-info">
        &mdash;
        {%- render 'tool-tip-trigger',
          title: size_chart_title,
          content: section.blocks[sizechart_index].settings.size_chart.content,
          context: 'size-chart'
        -%}
      </span>
    {%- endif -%}
    {%- if is_color -%}
      <span class="variant__label-info">
        &mdash;
        <span
          data-variant-color-label
          data-index="{{ forloop.index0 }}"
          data-option-index="{{ color_option_index }}"
        >
          {{ option.selected_value }}
        </span>
      </span>
    {%- endif -%}
  </label>

  <fieldset
    class="variant-input-wrap"
    name="{{ option.name }}"
    data-index="option{{ option_index }}"
    data-handle="{{ option.name | handleize }}"
    id="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ forloop.index0 }}"
  >
    <legend class="hide">{{ option.name }}</legend>

    <div class="color_title1">HERO SERIES</div>
    {%- for value in option.values -%}
      {%- liquid
        assign product_available = true
        if product.options.size == 1
          assign product_available = product.variants[forloop.index0].available
        endif
      -%}
      {% if product.variants[forloop.index0].metafields.custom.v_type == 'HERO' %}
        <div
          class="
            variant-input {{product.variants[forloop.index0].sku}}          HERO
            {% for item in product.variants[forloop.index0].metafields.custom.v_sames.value %}
              {{ item }}

            {% endfor %}
          "
          data-index="option{{ option_index }}"
          data-value="{{ value | escape }}"
          acc-id="{{product.variants[forloop.index0].metafields.custom.associate_id}}"
        >
          <input
            type="radio"
            {% if option.selected_value == value %}
              checked="checked"
            {% endif %}
            form="{{ form_id }}"
            value="{{ value | escape }}"
            data-index="option{{ option_index }}"
            name="{{ option.name }}"
            data-variant-input
            class="{% unless product_available %} disabled{% endunless %}{% if is_color %} variant__input--color-swatch{% endif %}"
            {% if is_color %}
              data-color-name="{{ value | escape }}"
            {% endif %}
            {% if is_color %}
              data-color-index="{{ color_option_index }}"
            {% endif %}
            id="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
          >
          {%- if is_color -%}
            {%- liquid
              assign color_file_name = value | handle | append: '.' | append: swatch_file_extension
              assign color_image = color_file_name | file_img_url: '50x50' | prepend: 'https:' | split: '?' | first
              assign color_swatch_fallback = value | split: ' ' | last | handle
            -%}
            <label
              for="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
              class="color-swatch color-swatch--{{ value | handle }}{% unless product_available %} disabled{% endunless %}"
              style="
                background-color: {{ color_swatch_fallback }};
                {% if images[color_file_name] != blank %}  background-image: url({{ color_image }});{% endif %}
              "
            >
              {{ value | escape }}
            </label>
          {%- else -%}
            <label
              for="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
              {% unless product_available %}
                class="disabled"
              {% endunless %}
            >
              {% assign imgSrc = product.variants[forloop.index0].metafields.custom.choose_your_color %}
              <img src="{{imgSrc.value | img_url:'50x' }}" alt="{{imgSrc.alt}}">

              {{ value | escape }}
            </label>
          {%- endif -%}
        </div>
      {% endif %}
    {%- endfor -%}

    <div class="color_title1">LEGEND SERIES</div>
    {%- for value in option.values -%}
      {%- liquid
        assign product_available = true
        if product.options.size == 1
          assign product_available = product.variants[forloop.index0].available
        endif
      -%}
      {% if product.variants[forloop.index0].metafields.custom.v_type == 'LEGEND' %}
        <div
          class="
            variant-input {{product.variants[forloop.index0].sku}}        LEGEND
            {% for item in product.variants[forloop.index0].metafields.custom.v_sames.value %}
              {{ item }}
            {% endfor %}
          "
          data-index="option{{ option_index }}"
          data-value="{{ value | escape }}"
          acc-id="{{product.variants[forloop.index0].metafields.custom.associate_id}}"
        >
          <input
            type="radio"
            {% if option.selected_value == value %}
              checked="checked"
            {% endif %}
            form="{{ form_id }}"
            value="{{ value | escape }}"
            data-index="option{{ option_index }}"
            name="{{ option.name }}"
            data-variant-input
            class="{% unless product_available %} disabled{% endunless %}{% if is_color %} variant__input--color-swatch{% endif %}"
            {% if is_color %}
              data-color-name="{{ value | escape }}"
            {% endif %}
            {% if is_color %}
              data-color-index="{{ color_option_index }}"
            {% endif %}
            id="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
          >
          {%- if is_color -%}
            {%- liquid
              assign color_file_name = value | handle | append: '.' | append: swatch_file_extension
              assign color_image = color_file_name | file_img_url: '50x50' | prepend: 'https:' | split: '?' | first
              assign color_swatch_fallback = value | split: ' ' | last | handle
            -%}
            <label
              for="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
              class="color-swatch color-swatch--{{ value | handle }}{% unless product_available %} disabled{% endunless %}"
              style="background-color: {{ color_swatch_fallback }};{% if images[color_file_name] != blank %}  background-image: url({{ color_image }});{% endif %}"
            >
              {{ value | escape }}
            </label>
          {%- else -%}
            <label
              for="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
              {% unless product_available %}
                class="disabled"
              {% endunless %}
            >
              {% assign imgSrc = product.variants[forloop.index0].metafields.custom.choose_your_color %}
              <img src="{{imgSrc.value | img_url:'50x' }}" alt="{{imgSrc.alt}}">

              {{ value | escape }}
            </label>
          {%- endif -%}
        </div>
      {% endif %}
    {%- endfor -%}

    <div class="color_title1">HUNTER SERIES</div>
    {%- for value in option.values -%}
      {%- liquid
        assign product_available = true
        if product.options.size == 1
          assign product_available = product.variants[forloop.index0].available
        endif
      -%}
      {% if product.variants[forloop.index0].metafields.custom.v_type == 'HUNTER' %}
        <div
          class="
            variant-input {{product.variants[forloop.index0].sku}}          HUNTER
            {% for item in product.variants[forloop.index0].metafields.custom.v_sames.value %}
              {{ item }}
            {% endfor %}
          "
          data-index="option{{ option_index }}"
          data-value="{{ value | escape }}"
          acc-id="{{product.variants[forloop.index0].metafields.custom.associate_id}}"
        >
          <input
            type="radio"
            {% if option.selected_value == value %}
              checked="checked"
            {% endif %}
            form="{{ form_id }}"
            value="{{ value | escape }}"
            data-index="option{{ option_index }}"
            name="{{ option.name }}"
            data-variant-input
            class="{% unless product_available %} disabled{% endunless %}{% if is_color %} variant__input--color-swatch{% endif %}"
            {% if is_color %}
              data-color-name="{{ value | escape }}"
            {% endif %}
            {% if is_color %}
              data-color-index="{{ color_option_index }}"
            {% endif %}
            id="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
          >
          {%- if is_color -%}
            {%- liquid
              assign color_file_name = value | handle | append: '.' | append: swatch_file_extension
              assign color_image = color_file_name | file_img_url: '50x50' | prepend: 'https:' | split: '?' | first
              assign color_swatch_fallback = value | split: ' ' | last | handle
            -%}
            <label
              for="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
              class="color-swatch color-swatch--{{ value | handle }}{% unless product_available %} disabled{% endunless %}"
              style="background-color: {{ color_swatch_fallback }};{% if images[color_file_name] != blank %}  background-image: url({{ color_image }});{% endif %}"
            >
              {{ value | escape }}
              {{ value | escape }}
            </label>
          {%- else -%}
            <label
              for="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
              {% unless product_available %}
                class="disabled"
              {% endunless %}
            >
              {% assign imgSrc = product.variants[forloop.index0].metafields.custom.choose_your_color %}
              <img src="{{imgSrc.value | img_url:'50x' }}" alt="{{imgSrc.alt}}">

              {{ value | escape }}
            </label>
          {%- endif -%}
        </div>
      {% endif %}
    {%- endfor -%}

    <div class="color_title1">DEFENDER SERIES</div>
    {%- for value in option.values -%}
      {%- liquid
        assign product_available = true
        if product.options.size == 1
          assign product_available = product.variants[forloop.index0].available
        endif
      -%}
      {% if product.variants[forloop.index0].metafields.custom.v_type == 'DEFENDER' %}
        <div
          class="
            variant-input {{product.variants[forloop.index0].sku}}          DEFENDER
            {% for item in product.variants[forloop.index0].metafields.custom.v_sames.value %}
              {{ item }}
            {% endfor %}
          "
          data-index="option{{ option_index }}"
          data-value="{{ value | escape }}"
          acc-id="{{product.variants[forloop.index0].metafields.custom.associate_id}}"
        >
          <input
            type="radio"
            {% if option.selected_value == value %}
              checked="checked"
            {% endif %}
            form="{{ form_id }}"
            value="{{ value | escape }}"
            data-index="option{{ option_index }}"
            name="{{ option.name }}"
            data-variant-input
            class="{% unless product_available %} disabled{% endunless %}{% if is_color %} variant__input--color-swatch{% endif %}"
            {% if is_color %}
              data-color-name="{{ value | escape }}"
            {% endif %}
            {% if is_color %}
              data-color-index="{{ color_option_index }}"
            {% endif %}
            id="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
          >
          {%- if is_color -%}
            {%- liquid
              assign color_file_name = value | handle | append: '.' | append: swatch_file_extension
              assign color_image = color_file_name | file_img_url: '50x50' | prepend: 'https:' | split: '?' | first
              assign color_swatch_fallback = value | split: ' ' | last | handle
            -%}
            <label
              for="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
              class="color-swatch color-swatch--{{ value | handle }}{% unless product_available %} disabled{% endunless %}"
              style="background-color: {{ color_swatch_fallback }};{% if images[color_file_name] != blank %}  background-image: url({{ color_image }});{% endif %}"
            >
              {{ value | escape }}
            </label>
          {%- else -%}
            <label
              for="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
              {% unless product_available %}
                class="disabled"
              {% endunless %}
            >
              {% assign imgSrc = product.variants[forloop.index0].metafields.custom.choose_your_color %}
              <img src="{{imgSrc.value | img_url:'50x' }}" alt="{{imgSrc.alt}}">

              {{ value | escape }}
            </label>
          {%- endif -%}
        </div>
      {% endif %}
    {%- endfor -%}

    <div class="color_title1">GLADIATOR SERIES</div>
    {%- for value in option.values -%}
      {%- liquid
        assign product_available = true
        if product.options.size == 1
          assign product_available = product.variants[forloop.index0].available
        endif
      -%}
      {% if product.variants[forloop.index0].metafields.custom.v_type == 'GLADIATOR' %}
        <div
          class="
            variant-input {{product.variants[forloop.index0].sku}}     GLADIATOR
            {% for item in product.variants[forloop.index0].metafields.custom.v_sames.value %}
              {{ item }}
            {% endfor %}
          "
          data-index="option{{ option_index }}"
          data-value="{{ value | escape }}"
          acc-id="{{product.variants[forloop.index0].metafields.custom.associate_id}}"
        >
          <input
            type="radio"
            {% if option.selected_value == value %}
              checked="checked"
            {% endif %}
            form="{{ form_id }}"
            value="{{ value | escape }}"
            data-index="option{{ option_index }}"
            name="{{ option.name }}"
            data-variant-input
            class="{% unless product_available %} disabled{% endunless %}{% if is_color %} variant__input--color-swatch{% endif %} "
            {% if is_color %}
              data-color-name="{{ value | escape }}"
            {% endif %}
            {% if is_color %}
              data-color-index="{{ color_option_index }}"
            {% endif %}
            id="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
          >
          {%- if is_color -%}
            {%- liquid
              assign color_file_name = value | handle | append: '.' | append: swatch_file_extension
              assign color_image = color_file_name | file_img_url: '50x50' | prepend: 'https:' | split: '?' | first
              assign color_swatch_fallback = value | split: ' ' | last | handle
            -%}
            <label
              for="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
              class="color-swatch color-swatch--{{ value | handle }}{% unless product_available %} disabled{% endunless %}"
              style="background-color: {{ color_swatch_fallback }};{% if images[color_file_name] != blank %}  background-image: url({{ color_image }});{% endif %}"
            >
              {{ value | escape }}
            </label>
          {%- else -%}
            <label
              for="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
              {% unless product_available %}
                class="disabled"
              {% endunless %}
            >
              {% assign imgSrc = product.variants[forloop.index0].metafields.custom.choose_your_color %}
              <img src="{{imgSrc.value | img_url:'50x' }}" alt="{{imgSrc.alt}}">

              {{ value | escape }}
            </label>
          {%- endif -%}
        </div>
      {% endif %}
    {%- endfor -%}

    <div class="color_title1">COMMANDER SERIES</div>
    {%- for value in option.values -%}
      {%- liquid
        assign product_available = true
        if product.options.size == 1
          assign product_available = product.variants[forloop.index0].available
        endif
      -%}
      {% if product.variants[forloop.index0].metafields.custom.v_type == 'COMMANDER' %}
        <div
          class="
            variant-input {{product.variants[forloop.index0].sku}}           COMMANDER
            {% for item in product.variants[forloop.index0].metafields.custom.v_sames.value %}
              {{ item }}
            {% endfor %}
          "
          data-index="option{{ option_index }}"
          data-value="{{ value | escape }}"
          acc-id="{{product.variants[forloop.index0].metafields.custom.associate_id}}"
        >
          <input
            type="radio"
            {% if option.selected_value == value %}
              checked="checked"
            {% endif %}
            form="{{ form_id }}"
            value="{{ value | escape }}"
            data-index="option{{ option_index }}"
            name="{{ option.name }}"
            data-variant-input
            class="{% unless product_available %} disabled{% endunless %}{% if is_color %} variant__input--color-swatch{% endif %}"
            {% if is_color %}
              data-color-name="{{ value | escape }}"
            {% endif %}
            {% if is_color %}
              data-color-index="{{ color_option_index }}"
            {% endif %}
            id="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
          >
          {%- if is_color -%}
            {%- liquid
              assign color_file_name = value | handle | append: '.' | append: swatch_file_extension
              assign color_image = color_file_name | file_img_url: '50x50' | prepend: 'https:' | split: '?' | first
              assign color_swatch_fallback = value | split: ' ' | last | handle
            -%}
            <label
              for="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
              class="color-swatch color-swatch--{{ value | handle }}{% unless product_available %} disabled{% endunless %}"
              style="background-color: {{ color_swatch_fallback }};{% if images[color_file_name] != blank %}  background-image: url({{ color_image }});{% endif %}"
            >
              {{ value | escape }}
            </label>
          {%- else -%}
            <label
              for="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
              {% unless product_available %}
                class="disabled"
              {% endunless %}
            >
              {% assign imgSrc = product.variants[forloop.index0].metafields.custom.choose_your_color %}
              <img src="{{imgSrc.value | img_url:'50x' }}" alt="{{imgSrc.alt}}">

              {{ value | escape }}
            </label>
          {%- endif -%}
        </div>
      {% endif %}
    {%- endfor -%}

    <div class="color_title1">ASSASSIN SERIES</div>

    {%- for value in option.values -%}
      {%- liquid
        assign product_available = true
        if product.options.size == 1
          assign product_available = product.variants[forloop.index0].available
        endif
      -%}
      {% if product.variants[forloop.index0].metafields.custom.v_type == 'ASSASSIN' %}
        <div
          class="
            variant-input {{product.variants[forloop.index0].sku}}   ASSASSIN
            {% for item in product.variants[forloop.index0].metafields.custom.v_sames.value %}
              {{ item }}
            {% endfor %}
          "
          data-index="option{{ option_index }}"
          data-value="{{ value | escape }}"
          acc-id="{{product.variants[forloop.index0].metafields.custom.associate_id}}"
        >
          <input
            type="radio"
            {% if option.selected_value == value %}
              checked="checked"
            {% endif %}
            form="{{ form_id }}"
            value="{{ value | escape }}"
            data-index="option{{ option_index }}"
            name="{{ option.name }}"
            data-variant-input
            class="{% unless product_available %} disabled{% endunless %}{% if is_color %} variant__input--color-swatch{% endif %}"
            {% if is_color %}
              data-color-name="{{ value | escape }}"
            {% endif %}
            {% if is_color %}
              data-color-index="{{ color_option_index }}"
            {% endif %}
            id="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
          >
          {%- if is_color -%}
            {%- liquid
              assign color_file_name = value | handle | append: '.' | append: swatch_file_extension
              assign color_image = color_file_name | file_img_url: '50x50' | prepend: 'https:' | split: '?' | first
              assign color_swatch_fallback = value | split: ' ' | last | handle
            -%}
            <label
              for="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
              class="color-swatch color-swatch--{{ value | handle }}{% unless product_available %} disabled{% endunless %}"
              style="background-color: {{ color_swatch_fallback }};{% if images[color_file_name] != blank %}  background-image: url({{ color_image }});{% endif %}"
            >
              {{ value | escape }}
            </label>
          {%- else -%}
            <label
              for="ProductSelect-{{ section_id }}-{{ product.id }}-option-{{ option.name | handleize }}-{{ value | url_encode }}"
              {% unless product_available %}
                class="disabled"
              {% endunless %}
            >
              {% assign imgSrc = product.variants[forloop.index0].metafields.custom.choose_your_color %}
              <img src="{{imgSrc.value | img_url:'50x' }}" alt="{{imgSrc.alt}}">

              {{ value | escape }}
            </label>
          {%- endif -%}
        </div>
      {% endif %}
    {%- endfor -%}
  </fieldset>
</div>
